Olive AVG Engine 整体部署
===

Olive AVG Engine Project - [Homepage](https://github.com/leinue/AVG)

## Part 1 概述

Olive AVG Engine，简称OAE，是一个通过解析OAE Script而呈现OAE Script中所设定的冒险游戏的游戏引擎。
整个OAE总体上分为两个主要模块，他们分别是 _脚本解析与执行模块_ 和 _图像呈现与事件扑捉模块_ 。 _脚本解析与执行模块_ 主要的功能是能够读入脚本，对脚本进行解析，将脚本中所记录的界面信息翻译成一套特定的格式传递给 _图像呈现与事件扑捉模块_ ，并且处理用户的动作产生的事件。而 _图像呈现与事件扑捉模块_ 的功能是向用户呈现脚本解析与执行模块传递给自己的信息显示出来，并且当用户的动作产生事件时，该模块会捕获这些事件，并且将这些动作产生的信号传递给 _脚本解析与执行模块_ ，由 _脚本解析与执行模块_ 进行处理。

## Part 2 整体部署：图像呈现与事件捕捉模块

该模块所需要做的首先便是在用户窗体上呈现由一组特定数据结构表示的界面显示数据。表示这种界面显示数据的数据结构被称为 `OAEItem`。`OAEItem`将保存一个显示单元的位置，资源，产生事件时的处理方式等信息。在该模块中，这将由一个数组储存。同时，将有一个方法`UIPaint`读取该数组的每一项对用户窗体进行绘制。每次绘制应该发生在用户窗体产生重绘（Repaint）事件和其他模块调用该函数时。产生事件时（例如用户点击），接受事件的方法`FormEvent`将确定受事件影响的显示单元，并且通过`OAEItem`中指定的处理方式，调用一个callback函数。同时，针对多次使用的资源，该模块应该提供缓存机制。

## Part 3 整体部署：脚本解析与执行模块

 该模块应该是在整个引擎中最为复杂，实现起来难度最大的模块。这个模块被要求能够处理`OAEScript`。`OAEScript`是一种控制冒险游戏界面与游戏流程的脚本。该脚本的详细信息会被写在另一个文档中。该模块将有一个从一个Stream Reader中读入`OAEScript`的方法（至于为何不直接From File，主要是因为Script并不一定以File的形式存在）。该函数会把脚本的每个`Operation`读入对象的`Operations`数组。然后会有一个方法用来执行以数组形式存在的一组`Operation`。同时该模块内部应该有一个`Actions`数组和`Vars`数组，储存从脚本中读入的全部`Action`和`Var`。并且应该有一个方法来处理由图像呈现与事件扑捉模块传来的每一个事件。
